[supervisord]
logfile=/mnt/e/projects/.agent-logs/automation/supervisord.log
logfile_maxbytes=50MB
logfile_backups=10
loglevel=info
pidfile=/mnt/e/projects/.automation/state/supervisord.pid
nodaemon=false
minfds=1024
minprocs=200

[unix_http_server]
file=/mnt/e/projects/.automation/state/supervisor.sock
chmod=0700

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///mnt/e/projects/.automation/state/supervisor.sock

# BookCLI Continuous Generator
[program:bookcli-generator]
command=/usr/bin/python3 /mnt/e/projects/.automation/scripts/bookcli_continuous_generator.py
directory=/mnt/e/projects/bookcli
user=elliott
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/mnt/e/projects/.agent-logs/automation/bookcli-generator-supervisor.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=BOOKCLI_DAILY_BUDGET="20.0",BOOKCLI_MAX_BOOKS_PER_DAY="100",PYTHONUNBUFFERED="1"
stopwaitsecs=300
stopsignal=TERM
priority=10

# Portfolio Monitor
[program:portfolio-monitor]
command=/usr/bin/python3 /mnt/e/projects/.automation/scripts/portfolio_monitor.py
directory=/mnt/e/projects
user=elliott
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/mnt/e/projects/.agent-logs/automation/portfolio-monitor-supervisor.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PYTHONUNBUFFERED="1"
stopwaitsecs=60
stopsignal=TERM
priority=20

[group:portfolio-automation]
programs=bookcli-generator,portfolio-monitor
